<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:pm="http://primefaces.org/ui">

<h:head></h:head>
<body>
	<h:form id="form">
		<div>
			<pm:fieldset>
				<h:panelGrid id="student"  columns="2" cellpadding="5">
					<p:outputLabel value="Alumno:" />
					<p:outputLabel value="#{StudentList.nameStudent}" />
				</h:panelGrid>
			</pm:fieldset>
		</div>

		<p:dataTable id="checkboxDT" var="lp" value="#{StudentList.listaPsp}"
			selection="#{StudentList.temListaPsp}" rowKey="#{lp.numPayment}"
			paginator="true" rows="10"
			paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
			filteredValue="#{StudentList.filterPayments}" style="margin-bottom:0">

			<f:facet name="header">
            Pagos
        </f:facet>
			<p:column selectionMode="multiple"
				style="width:16px;text-align:center" />
			<p:column headerText="Fecha" style="width:120px">
				<h:outputText value="#{lp.datePayment}" />
			</p:column>
			<p:column headerText="No Pago">
				<h:outputText value="#{lp.numPayment}" />
			</p:column>
			<p:column headerText="Curso">
				<h:outputText value="#{lp.courseName}" />
			</p:column>
			<p:column headerText="Monto">
				<h:outputText value="#{lp.amountPayment}" />
			</p:column>
			<p:column headerText="Forma de pago">
				<h:outputText value="#{lp.typePayment}" />
			</p:column>
		</p:dataTable>

		<pm:fieldset>
			<h:panelGrid id="totals" columns="2" cellpadding="5">
				<p:outputLabel value="Costo curso: " />
				<p:outputLabel value="#{StudentList.totalCourse}" />

				<p:outputLabel value="Total pagado: " />
				<p:outputLabel value="#{StudentList.totalPayment}" />

				<p:outputLabel value="Restante: " />
				<p:outputLabel value="#{StudentList.remaining}" />
			</h:panelGrid>
		</pm:fieldset>

		<p:toolbar>
			<f:facet name="left">
				<p:commandButton process="checkboxDT" update=":form:multiCarDetail"
					icon="ui-icon-document" value="Generar tiket"
					oncomplete="PF('multiCarDialog').show()" />
			</f:facet>
			<f:facet name="right">
				<p:commandButton value="Atras" action="back" />
			</f:facet>
		</p:toolbar>

		<p:dialog header="Pagos seleccionados" widgetVar="multiCarDialog"
			modal="true" showEffect="fade" hideEffect="fade" resizable="false"
			width="200">
			<p:outputPanel id="multiCarDetail" style="text-align:center;">
				<ui:repeat value="#{StudentList.temListaPsp}" var="lp">
					<h:outputText value="#{lp.numPayment} - #{lp.courseName}"
						style="display:block" />
				</ui:repeat>
			</p:outputPanel>
		</p:dialog>
	</h:form>
</body>
</html>
